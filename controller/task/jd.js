let read = require('../shop/jd');
let save = require('../db/jd');
let db = require('./db');
let shopList = require('./jdShopList').list;
let util = require('../util/common');

async function init() {
    // 载入店铺初始信息
    // await loadDefault();

    await getShopList();

    //  每日商品列表更新
    // await updateGoodsList();

    // 评论列表更新
    //updateComments();

    // 评论信息分词
    // read.getCommentFromDb();
}

async function getShopList(){
  let shopList =[{"id":"24006","name":"天鑫洋","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%A4%A9%E9%91%AB%E6%B4%8B%40&uc=0#J_searchWrap"},{"id":"51723","name":"泰光银楼","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%B3%B0%E5%85%89%E9%93%B6%E6%A5%BC%40&uc=0#J_searchWrap"},{"id":"62793","name":"臻汇银","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%87%BB%E6%B1%87%E9%93%B6%40&uc=0#J_searchWrap"},{"id":"7305","name":"高赛尔","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%AB%98%E8%B5%9B%E5%B0%94%40&uc=0#J_searchWrap"},{"id":"32343","name":"菜百首饰","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%8F%9C%E7%99%BE%E9%A6%96%E9%A5%B0%40&uc=0#J_searchWrap"},{"id":"9544","name":"金言","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%87%91%E8%A8%80%40&uc=0#J_searchWrap"},{"id":"188973","name":"步步高（BUBUGAO）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%AD%A5%E6%AD%A5%E9%AB%98%EF%BC%88BUBUGAO%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"11483","name":"莉翠行（LICUIHANG）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%8E%89%E7%BF%A0%E8%A1%8C%EF%BC%88LICUIHANG%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"110461","name":"恒致（Hengzhi）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%81%92%E8%87%B4%EF%BC%88Hengzhi%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"49118","name":"良平","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%89%AF%E5%B9%B3%40&uc=0#J_searchWrap"},{"id":"32188","name":"百年宝诚","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%99%BE%E5%B9%B4%E5%AE%9D%E8%AF%9A%40&uc=0#J_searchWrap"},{"id":"91285","name":"瑞爱丽","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%91%9E%E7%88%B1%E4%B8%BD%40&uc=0#J_searchWrap"},{"id":"21256","name":"钻石凤凰（Dphoenix）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%92%BB%E7%9F%B3%E5%87%A4%E5%87%B0%EF%BC%88Dphoenix%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"32282","name":"顺庆银楼（SHUN QIN YIN LOU SQ）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%A1%BA%E5%BA%86%E9%93%B6%E6%A5%BC%EF%BC%88SHUN%20QIN%20YIN%20LOU%20SQ%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"39624","name":"宝银世家","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%AE%9D%E9%93%B6%E4%B8%96%E5%AE%B6%40&uc=0#J_searchWrap"},{"id":"108005","name":"诗美洛（SMILOVE）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%AF%97%E7%BE%8E%E6%B4%9B%EF%BC%88SMILOVE%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"24132","name":"明日","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%98%8E%E6%97%A5%40&uc=0#J_searchWrap"},{"id":"19795","name":"银斯妮（yinsini）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%93%B6%E6%96%AF%E5%A6%AE%EF%BC%88yinsini%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"32202","name":"徐福银","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%BE%90%E7%A6%8F%E9%93%B6%40&uc=0#J_searchWrap"},{"id":"107181","name":"寸发标","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%AF%B8%E5%8F%91%E6%A0%87%40&uc=0#J_searchWrap"},{"id":"6204","name":"蒂朗妮（TILENY）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%92%82%E6%9C%97%E5%A6%AE%EF%BC%88TILENY%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"37290","name":"丰泽西（Fzx jewellery）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%B8%B0%E6%B3%BD%E8%A5%BF%EF%BC%88Fzx%20jewellery%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"149561","name":"白银颂","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%99%BD%E9%93%B6%E9%A2%82%40&uc=0#J_searchWrap"},{"id":"84210","name":"永华禧宝","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%B0%B8%E5%8D%8E%E7%A6%A7%E5%AE%9D%40&uc=0#J_searchWrap"},{"id":"84372","name":"鑫龙运（XINLONGYUN）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%91%AB%E9%BE%99%E8%BF%90%EF%BC%88XINLONGYUN%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"100937","name":"富沃达","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%AF%8C%E6%B2%83%E8%BE%BE%40&uc=0#J_searchWrap"},{"id":"37153","name":"楼银钗（LOUYINCHAI）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%A5%BC%E9%93%B6%E9%92%97%EF%BC%88LOUYINCHAI%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"156079","name":"永银（YONG-YIN）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%B0%B8%E9%93%B6%EF%BC%88YONG-YIN%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"23937","name":"玺爵（SZEV）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%8E%BA%E7%88%B5%EF%BC%88SZEV%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"20730","name":"招金（ZHAOJIN）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%8B%9B%E9%87%91%EF%BC%88ZHAOJIN%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"119012","name":"云银","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%BA%91%E9%93%B6%40&uc=0#J_searchWrap"},{"id":"122123","name":"玫之尔（MEI ZHI ER）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%8E%AB%E4%B9%8B%E5%B0%94%EF%BC%88MEI%20ZHI%20ER%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"5574","name":"创源","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%88%9B%E6%BA%90%40&uc=0#J_searchWrap"},{"id":"49441","name":"百代","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%99%BE%E4%BB%A3%40&uc=0#J_searchWrap"},{"id":"103740","name":"可投","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%8F%AF%E6%8A%95%40&uc=0#J_searchWrap"},{"id":"37627","name":"老银匠","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%80%81%E9%93%B6%E5%8C%A0%40&uc=0#J_searchWrap"},{"id":"217957","name":"宝佳蔓","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%AE%9D%E4%BD%B3%E8%94%93%40&uc=0#J_searchWrap"},{"id":"241086","name":"工银金行家","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%B7%A5%E9%93%B6%E9%87%91%E8%A1%8C%E5%AE%B6%40&uc=0#J_searchWrap"},{"id":"85773","name":"首秀（supershow）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%A6%96%E7%A7%80%EF%BC%88supershow%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"181526","name":"万洋","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&rt=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%B8%87%E6%B4%8B%40&uc=0#J_searchWrap"},{"id":"67147","name":"零兑金号","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%9B%B6%E5%85%91%E9%87%91%E5%8F%B7%40&uc=0#J_searchWrap"},{"id":"135551","name":"零点在线","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%9B%B6%E7%82%B9%E5%9C%A8%E7%BA%BF%40&uc=0#J_searchWrap"},{"id":"4140","name":"百银","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%99%BE%E9%93%B6%40&uc=0#J_searchWrap"},{"id":"32345","name":"菜百","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%8F%9C%E7%99%BE%40&uc=0#J_searchWrap"},{"id":"93241","name":"中鑫博泉","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%B8%AD%E9%91%AB%E5%8D%9A%E6%B3%89%40&uc=0#J_searchWrap"},{"id":"105517","name":"古道月银","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%8F%A4%E9%81%93%E6%9C%88%E9%93%B6%40&uc=0#J_searchWrap"},{"id":"188200","name":"京银（JINGEM）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%BA%AC%E9%93%B6%EF%BC%88JINGEM%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"129049","name":"品客（Pringles）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%93%81%E5%AE%A2%EF%BC%88Pringles%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"4406","name":"宝泉钱币","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%AE%9D%E6%B3%89%E9%92%B1%E5%B8%81%40&uc=0#J_searchWrap"},{"id":"156411","name":"正善堂","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%AD%A3%E5%96%84%E5%A0%82%40&uc=0#J_searchWrap"},{"id":"88336","name":"臻礼银诚","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%87%BB%E7%A4%BC%E9%93%B6%E8%AF%9A%40&uc=0#J_searchWrap"},{"id":"17504","name":"唯一（Winy）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%94%AF%E4%B8%80%EF%BC%88Winy%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"130910","name":"苏园林","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%8B%8F%E5%9B%AD%E6%9E%97%40&uc=0#J_searchWrap"},{"id":"16823","name":"天宝龙凤","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%A4%A9%E5%AE%9D%E9%BE%99%E5%87%A4%40&uc=0#J_searchWrap"},{"id":"203091","name":"中超","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%B8%AD%E8%B6%85%40&uc=0#J_searchWrap"},{"id":"1234","name":"iwe","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_iwe%40&uc=0#J_searchWrap"},{"id":"77328","name":"卡莱恩","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%8D%A1%E8%8E%B1%E6%81%A9%40&uc=0#J_searchWrap"},{"id":"70015","name":"银蝶坊","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%93%B6%E8%9D%B6%E5%9D%8A%40&uc=0#J_searchWrap"},{"id":"21251","name":"钻宝源珠宝（BEASONE TREASURE SOURCE）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%92%BB%E5%AE%9D%E6%BA%90%E7%8F%A0%E5%AE%9D%EF%BC%88BEASONE%20TREASURE%20SOURCE%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"7527","name":"古琅士（gulance）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%8F%A4%E7%90%85%E5%A3%AB%EF%BC%88gulance%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"14511","name":"倾爱","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%80%BE%E7%88%B1%40&uc=0#J_searchWrap"},{"id":"10404","name":"珂兰（KELA.CN）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%8F%82%E5%85%B0%EF%BC%88KELA.CN%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"11668","name":"六福典雅珠宝","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%85%AD%E7%A6%8F%E5%85%B8%E9%9B%85%E7%8F%A0%E5%AE%9D%40&uc=0#J_searchWrap"},{"id":"38639","name":"凤瑞麟","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%87%A4%E7%91%9E%E9%BA%9F%40&uc=0#J_searchWrap"},{"id":"95448","name":"月石缘","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%9C%88%E7%9F%B3%E7%BC%98%40&uc=0#J_searchWrap"},{"id":"43908","name":"豪至尊（HaoZhiZun）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%B1%AA%E8%87%B3%E5%B0%8A%EF%BC%88HaoZhiZun%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"215041","name":"兮若骥","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%85%AE%E8%8B%A5%E9%AA%A5%40&uc=0#J_searchWrap"},{"id":"78001","name":"佐梵妮","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%BD%90%E6%A2%B5%E5%A6%AE%40&uc=0#J_searchWrap"},{"id":"39659","name":"秦金","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%A7%A6%E9%87%91%40&uc=0#J_searchWrap"},{"id":"8259","name":"恒美瑞","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%81%92%E7%BE%8E%E7%91%9E%40&uc=0#J_searchWrap"},{"id":"52267","name":"银雪莲娜（INSHINER）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%93%B6%E9%9B%AA%E8%8E%B2%E5%A8%9C%EF%BC%88INSHINER%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"57211","name":"COISE","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_COISE%40&uc=0#J_searchWrap"},{"id":"4554","name":"贝贝安（BEIBEIAN）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%B4%9D%E8%B4%9D%E5%AE%89%EF%BC%88BEIBEIAN%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"67452","name":"老金匠（OLD GOLDSMITH）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%80%81%E9%87%91%E5%8C%A0%EF%BC%88OLD%20GOLDSMITH%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"28069","name":"紫金（ZiJin）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%B4%AB%E9%87%91%EF%BC%88ZiJin%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"1646","name":"MAO.MAO","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_MAO.MAO%40&uc=0#J_searchWrap"},{"id":"43220","name":"艾莉","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%89%BE%E8%8E%89%40&uc=0#J_searchWrap"},{"id":"23758","name":"潮尚美","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%BD%AE%E5%B0%9A%E7%BE%8E%40&uc=0#J_searchWrap"},{"id":"1312","name":"JPF","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_JPF%40&uc=0#J_searchWrap"},{"id":"180558","name":"喜饰进家（XISHIJINJIA）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%96%9C%E9%A5%B0%E8%BF%9B%E5%AE%B6%EF%BC%88XISHIJINJIA%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"201308","name":"牧诗伦","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%89%A7%E8%AF%97%E4%BC%A6%40&uc=0#J_searchWrap"},{"id":"57444","name":"炙真银楼","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%82%99%E7%9C%9F%E9%93%B6%E6%A5%BC%40&uc=0#J_searchWrap"},{"id":"50821","name":"月下（coon）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%9C%88%E4%B8%8B%EF%BC%88coon%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"138509","name":"POPOKING","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_POPOKING%40&uc=0#J_searchWrap"},{"id":"10998","name":"浪漫丽人","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%B5%AA%E6%BC%AB%E4%B8%BD%E4%BA%BA%40&uc=0#J_searchWrap"},{"id":"9575","name":"金中国","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%87%91%E4%B8%AD%E5%9B%BD%40&uc=0#J_searchWrap"},{"id":"201718","name":"漢唐·宗宗（HANTANG）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%BC%A2%E5%94%90%C2%B7%E5%AE%97%E5%AE%97%EF%BC%88HANTANG%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"14852","name":"瑞诺（Ruinuo）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%91%9E%E8%AF%BA%EF%BC%88Ruinuo%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"9787","name":"久爱（9i）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E4%B9%85%E7%88%B1%EF%BC%889i%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"13229","name":"慕美","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%85%95%E7%BE%8E%40&uc=0#J_searchWrap"},{"id":"235777","name":"百泰金文化（BATAR GOLD CULTURAL）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%99%BE%E6%B3%B0%E9%87%91%E6%96%87%E5%8C%96%EF%BC%88BATAR%20GOLD%20CULTURAL%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"92267","name":"预言（ORACLE）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%A2%84%E8%A8%80%EF%BC%88ORACLE%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"141297","name":"纯已久","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%BA%AF%E5%B7%B2%E4%B9%85%40&uc=0#J_searchWrap"},{"id":"44975","name":"金一","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%87%91%E4%B8%80%40&uc=0#J_searchWrap"},{"id":"174252","name":"简法","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E7%AE%80%E6%B3%95%40&uc=0#J_searchWrap"},{"id":"9345","name":"金地珠宝（JD JEWERAY）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%87%91%E5%9C%B0%E7%8F%A0%E5%AE%9D%EF%BC%88JD%20JEWERAY%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"9548","name":"金叶珠宝","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%87%91%E5%8F%B6%E7%8F%A0%E5%AE%9D%40&uc=0#J_searchWrap"},{"id":"178305","name":"老村巧匠","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E8%80%81%E6%9D%91%E5%B7%A7%E5%8C%A0%40&uc=0#J_searchWrap"},{"id":"76542","name":"宝亨达","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E5%AE%9D%E4%BA%A8%E8%BE%BE%40&uc=0#J_searchWrap"},{"id":"104868","name":"金利福钻石（JLF）","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E9%87%91%E5%88%A9%E7%A6%8F%E9%92%BB%E7%9F%B3%EF%BC%88JLF%EF%BC%89%40&uc=0#J_searchWrap"},{"id":"19655","name":"易燃火山","url":"https://search.jd.com/search?keyword=%E6%8A%95%E8%B5%84%E9%93%B6&enc=utf-8&qrst=1&stop=1&vt=2&offset=3&wq=%E6%8A%95%E8%B5%84%E9%93%B6&ev=exbrand_%E6%98%93%E7%87%83%E7%81%AB%E5%B1%B1%40&uc=0#J_searchWrap"}]
  let shops = await read.getShopList(shopList);
  console.log(shops);
}

async function updateGoodsList(localShopList) {

    if (typeof localShopList == 'undefined') {
        localShopList = await save.getShopList();
    }

    for (let i = 0; i < localShopList.length; i++) {
        let shopId = localShopList[i].id;
        console.log(`正在获取${localShopList[i].name} 的商品列表数据`);
        await getGoodsByShopId(shopId, localShopList);
    }
}

async function updateComments(localShopList) {

    if (typeof localShopList == 'undefined') {
        localShopList = await save.getShopList();
    }

    for (let i = 1; i < localShopList.length; i++) {
        let shopId = localShopList[i].id;
        console.log(`正在获取${localShopList[i].name} 的评论数据`);
        await getCommentByShopInfo(localShopList[i]);
    }
}

async function getGoodsByShopId(shopId, goodsList) {
    let flag = await db.needUpdate('jd_goods' + shopId);
    console.log('\n\n正在同步jd');
    // let goodsList = [];
    if (flag) {
        // goodsList = await read.getGoodsList(shopId);
        // // console.log(goodsList);
        // await save.setGoodList(goodsList);
        await read.getGoodsListAndSave(shopId);
        db.setCrawlerStatus('jd_goods' + shopId);
    }
}

// 根据店铺信息获取对应数据
async function getCommentByShopInfo(shop) {
    flag = await db.needUpdate('jd_comment' + shop.id);
    if (flag) {
        await read.getComment(shop);
        db.setCrawlerStatus('jd_comment' + shop.id);
    }
}


/**
 * 同步商品多家店铺的属性信息，用于最初的初始化，执行一次该函数后手动注释
 * 
 */
async function initJDShopInfo() {
    let shopInfo;
    let localShopList = await save.getShopList();

    for (let i = 0; i < shopList.length; i++) {
        let shopId = shopList[i].id;
        let needSave = localShopList.filter(item => item.id == shopId);
        needSave = (needSave.length == 0);
        if (needSave) {
            shopInfo = await read.getShopTemplate(shopList[i]);
            await save.setShopDetail(shopInfo);
        }
    }
}

async function loadDefault() {
    // 商店信息初始化一次即可
    await initJDShopInfo();
}

module.exports = {
    init,
    loadDefault,
    updateComments
};